var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,function(){"use strict";function e(e,t,n){window.jQuery?$(e).data(t,n):e.dataset[t]=n}function t(e,t){return window.jQuery?$(e).data(t):e.dataset[t]}function n(e,t){window.jQuery?$(e).removeClass(t):e.classList.remove(t)}function o(e,t){window.jQuery?$(e).addClass(t):e.classList.add(t)}var i={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"originalSet",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},s=!("onscroll"in window)||/glebot/.test(navigator.userAgent),r=function(e,t){e&&e(t)},l=function(e){return e.getBoundingClientRect().top+window.pageYOffset-e.ownerDocument.documentElement.clientTop},a=function(e,t,n){return(t===window?window.innerHeight+window.pageYOffset:l(t)+t.offsetHeight)<=l(e)-n},c=function(e){return e.getBoundingClientRect().left+window.pageXOffset-e.ownerDocument.documentElement.clientLeft},d=function(e,t,n){var o=window.innerWidth;return(t===window?o+window.pageXOffset:c(t)+o)<=c(e)-n},u=function(e,t,n){return(t===window?window.pageYOffset:l(t))>=l(e)+n+e.offsetHeight},h=function(e,t,n){return(t===window?window.pageXOffset:c(t))>=c(e)+n+e.offsetWidth},f=function(e,t,n){return!(a(e,t,n)||u(e,t,n)||d(e,t,n)||h(e,t,n))},_=function(e,t){var n=new e(t),o=new CustomEvent("LazyLoad::Initialized",{detail:{instance:n}});window.dispatchEvent(o)},p=function(e,n){var o=e.parentElement;if("PICTURE"===o.tagName)for(var i=0;i<o.children.length;i++){var s=o.children[i];if("SOURCE"===s.tagName){var r=t(s,n);r&&s.setAttribute("srcset",r)}}},g=function(e,n,o){var i=e.tagName,s=t(e,o);if("IMG"===i){p(e,n);var r=t(e,n);return r&&e.setAttribute("srcset",r),void(s&&e.setAttribute("src",s))}"IFRAME"!==i?s&&(e.style.backgroundImage='url("'+s+'")'):s&&e.setAttribute("src",s)},m=function(e){this._settings=_extends({},i,e),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._boundHandleScroll=this.handleScroll.bind(this),this._isFirstLoop=!0,window.addEventListener("resize",this._boundHandleScroll),this.update()};m.prototype={_reveal:function(e){var t=this._settings,i=function i(){t&&(e.removeEventListener("load",s),e.removeEventListener("error",i),n(e,t.class_loading),o(e,t.class_error),r(t.callback_error,e))},s=function s(){t&&(n(e,t.class_loading),o(e,t.class_loaded),e.removeEventListener("load",s),e.removeEventListener("error",i),r(t.callback_load,e))};"IMG"!==e.tagName&&"IFRAME"!==e.tagName||(e.addEventListener("load",s),e.addEventListener("error",i),o(e,t.class_loading)),g(e,t.data_srcset,t.data_src),r(t.callback_set,e)},_loopThroughElements:function(){var t=this._settings,n=this._elements,i=n?n.length:0,l=void 0,a=[],c=this._isFirstLoop;for(l=0;l<i;l++){var d=n[l];t.skip_invisible&&null===d.offsetParent||(s||f(d,t.container,t.threshold))&&(c&&o(d,t.class_initial),this._reveal(d),a.push(l),e(d,"wasProcessed",!0))}for(;a.length;)n.splice(a.pop(),1),r(t.callback_processed,n.length);0===i&&this._stopScrollHandler(),c&&(this._isFirstLoop=!1)},_purgeElements:function(){var e=this._elements,n=e.length,o=void 0,i=[];for(o=0;o<n;o++)t(e[o],"wasProcessed")&&i.push(o);for(;i.length>0;)e.splice(i.pop(),1)},_startScrollHandler:function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._boundHandleScroll))},_stopScrollHandler:function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._boundHandleScroll))},handleScroll:function(){var e=this._settings.throttle;if(0!==e){var t=Date.now(),n=e-(t-this._previousLoopTime);n<=0||n>e?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=t,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(function(){this._previousLoopTime=Date.now(),this._loopTimeout=null,this._loopThroughElements()}.bind(this),n))}else this._loopThroughElements()},update:function(){this._elements=Array.prototype.slice.call(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},destroy:function(){window.removeEventListener("resize",this._boundHandleScroll),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null}};var w=window.lazyLoadOptions;return w&&function(e,t){var n=t.length;if(n)for(var o=0;o<n;o++)_(e,t[o]);else _(e,t)}(m,w),m});